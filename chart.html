<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>杭州天气折线图</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg-start: #f6f0e7;
      --bg-end: #d7e6f2;
      --card-bg: rgba(255, 255, 255, 0.85);
      --text-main: #1b1f23;
      --text-muted: #5a6670;
      --line-6: #f06b42;
      --line-12: #2b7bb9;
      --line-20: #3a9c6f;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "IBM Plex Sans", system-ui, sans-serif;
      color: var(--text-main);
      background: radial-gradient(circle at top left, #fff7eb, transparent 40%),
                  radial-gradient(circle at top right, #e1f0ff, transparent 45%),
                  linear-gradient(135deg, var(--bg-start), var(--bg-end));
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 20px;
    }

    .card {
      width: min(1100px, 100%);
      background: var(--card-bg);
      border-radius: 24px;
      box-shadow: 0 24px 60px rgba(36, 44, 60, 0.18);
      padding: 28px 32px 36px;
      backdrop-filter: blur(12px);
      animation: rise 0.7s ease-out;
    }

    @keyframes rise {
      from { opacity: 0; transform: translateY(18px); }
      to { opacity: 1; transform: translateY(0); }
    }

    header {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 18px;
    }

    h1 {
      margin: 0;
      font-family: "ZCOOL XiaoWei", serif;
      font-weight: 400;
      font-size: clamp(28px, 3.2vw, 40px);
      letter-spacing: 0.5px;
    }

    .meta {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .meta span {
      display: inline-block;
      margin-right: 16px;
    }

    .toolbar {
      display: inline-flex;
      gap: 12px;
      padding: 6px;
      border-radius: 999px;
      background: rgba(27, 31, 35, 0.08);
      margin: 8px 0 18px;
    }

    .range-filter {
      display: inline-flex;
      gap: 10px;
      padding: 6px;
      border-radius: 999px;
      background: rgba(27, 31, 35, 0.08);
      margin: 0 0 18px;
    }

    .tab {
      border: none;
      background: transparent;
      color: var(--text-main);
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tab.is-active {
      background: #1b1f23;
      color: #fff;
      box-shadow: 0 10px 20px rgba(27, 31, 35, 0.2);
    }

    .year-filter {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      color: var(--text-muted);
      margin: 6px 0 18px;
    }

    .year-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px;
      border-radius: 999px;
      background: rgba(27, 31, 35, 0.08);
      color: var(--text-main);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .year-chip input {
      appearance: none;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 2px solid #1b1f23;
      display: inline-block;
      position: relative;
    }

    .year-chip input:checked {
      background: #1b1f23;
    }

    .chart-wrap {
      position: relative;
      height: 480px;
    }

    canvas {
      width: 100% !important;
      height: 100% !important;
    }

    @media (max-width: 720px) {
      .card { padding: 22px; }
      .chart-wrap { height: 360px; }
    }
  </style>
</head>
<body>
  <div class="card">
    <header>
      <h1>杭州天气温度记录</h1>
      <div class="meta">
        <span>更新于: 2026-01-04 09:53</span>
        <span>06:00 记录 3 条</span>
        <span>12:00 记录 3 条</span>
        <span>20:00 记录 3 条</span>
      </div>
    </header>
    <div class="year-filter">
      <span>年份</span>
      <label class="year-chip"><input type="checkbox" value="2025" checked><span>2025</span></label>
<label class="year-chip"><input type="checkbox" value="2026" checked><span>2026</span></label>
    </div>
    <div class="range-filter">
      <button class="tab" data-range="full">全年</button>
      <button class="tab" data-range="first-half">上半年</button>
      <button class="tab" data-range="second-half">下半年</button>
      <button class="tab is-active" data-range="last-3-months">最近 3 个月</button>
    </div>
    <div class="toolbar">
      <button class="tab is-active" data-mode="temperature">温度</button>
      <button class="tab" data-mode="humidity">湿度</button>
    </div>
    <div class="chart-wrap">
      <canvas id="weatherChart"></canvas>
    </div>
  </div>

  <script>
    const labels = ["01-01", "01-02", "01-03", "01-04", "01-05", "01-06", "01-07", "01-08", "01-09", "01-10", "01-11", "01-12", "01-13", "01-14", "01-15", "01-16", "01-17", "01-18", "01-19", "01-20", "01-21", "01-22", "01-23", "01-24", "01-25", "01-26", "01-27", "01-28", "01-29", "01-30", "01-31", "02-01", "02-02", "02-03", "02-04", "02-05", "02-06", "02-07", "02-08", "02-09", "02-10", "02-11", "02-12", "02-13", "02-14", "02-15", "02-16", "02-17", "02-18", "02-19", "02-20", "02-21", "02-22", "02-23", "02-24", "02-25", "02-26", "02-27", "02-28", "03-01", "03-02", "03-03", "03-04", "03-05", "03-06", "03-07", "03-08", "03-09", "03-10", "03-11", "03-12", "03-13", "03-14", "03-15", "03-16", "03-17", "03-18", "03-19", "03-20", "03-21", "03-22", "03-23", "03-24", "03-25", "03-26", "03-27", "03-28", "03-29", "03-30", "03-31", "04-01", "04-02", "04-03", "04-04", "04-05", "04-06", "04-07", "04-08", "04-09", "04-10", "04-11", "04-12", "04-13", "04-14", "04-15", "04-16", "04-17", "04-18", "04-19", "04-20", "04-21", "04-22", "04-23", "04-24", "04-25", "04-26", "04-27", "04-28", "04-29", "04-30", "05-01", "05-02", "05-03", "05-04", "05-05", "05-06", "05-07", "05-08", "05-09", "05-10", "05-11", "05-12", "05-13", "05-14", "05-15", "05-16", "05-17", "05-18", "05-19", "05-20", "05-21", "05-22", "05-23", "05-24", "05-25", "05-26", "05-27", "05-28", "05-29", "05-30", "05-31", "06-01", "06-02", "06-03", "06-04", "06-05", "06-06", "06-07", "06-08", "06-09", "06-10", "06-11", "06-12", "06-13", "06-14", "06-15", "06-16", "06-17", "06-18", "06-19", "06-20", "06-21", "06-22", "06-23", "06-24", "06-25", "06-26", "06-27", "06-28", "06-29", "06-30", "07-01", "07-02", "07-03", "07-04", "07-05", "07-06", "07-07", "07-08", "07-09", "07-10", "07-11", "07-12", "07-13", "07-14", "07-15", "07-16", "07-17", "07-18", "07-19", "07-20", "07-21", "07-22", "07-23", "07-24", "07-25", "07-26", "07-27", "07-28", "07-29", "07-30", "07-31", "08-01", "08-02", "08-03", "08-04", "08-05", "08-06", "08-07", "08-08", "08-09", "08-10", "08-11", "08-12", "08-13", "08-14", "08-15", "08-16", "08-17", "08-18", "08-19", "08-20", "08-21", "08-22", "08-23", "08-24", "08-25", "08-26", "08-27", "08-28", "08-29", "08-30", "08-31", "09-01", "09-02", "09-03", "09-04", "09-05", "09-06", "09-07", "09-08", "09-09", "09-10", "09-11", "09-12", "09-13", "09-14", "09-15", "09-16", "09-17", "09-18", "09-19", "09-20", "09-21", "09-22", "09-23", "09-24", "09-25", "09-26", "09-27", "09-28", "09-29", "09-30", "10-01", "10-02", "10-03", "10-04", "10-05", "10-06", "10-07", "10-08", "10-09", "10-10", "10-11", "10-12", "10-13", "10-14", "10-15", "10-16", "10-17", "10-18", "10-19", "10-20", "10-21", "10-22", "10-23", "10-24", "10-25", "10-26", "10-27", "10-28", "10-29", "10-30", "10-31", "11-01", "11-02", "11-03", "11-04", "11-05", "11-06", "11-07", "11-08", "11-09", "11-10", "11-11", "11-12", "11-13", "11-14", "11-15", "11-16", "11-17", "11-18", "11-19", "11-20", "11-21", "11-22", "11-23", "11-24", "11-25", "11-26", "11-27", "11-28", "11-29", "11-30", "12-01", "12-02", "12-03", "12-04", "12-05", "12-06", "12-07", "12-08", "12-09", "12-10", "12-11", "12-12", "12-13", "12-14", "12-15", "12-16", "12-17", "12-18", "12-19", "12-20", "12-21", "12-22", "12-23", "12-24", "12-25", "12-26", "12-27", "12-28", "12-29", "12-30", "12-31"];
    const labelMonths = labels.map((label) => Number(label.split('-')[0]));
    const labelDays = labels.map((label) => Number(label.split('-')[1]));
    const years = ["2025", "2026"];
    const latestYear = "2026";
    const defaultYears = ["2025", "2026"];
    const baseYear = 2001;
    const tempByYear = {"2025": {"6": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 29.0, null, null, null, null, null, 27.0, 28.0, 28.0, 28.0, 26.0, 26.0, 25.0, 23.0, 26.0, 27.0, 27.0, 26.0, 28.0, 25.0, 24.0, 24.0, 25.0, 25.0, 24.0, 23.0, 27.0, 28.0, 24.0, null, null, null, null, 24.0, null, 23.0, null, 25.0, 26.0, 25.0, 24.0, null, 28.0, 28.0, 23.0, 25.0, 26.0, 27.0, 24.0, 21.0, 22.0, 23.0, 24.0, 25.0, 20.0, 21.0, 22.0, 22.0, 22.0, 17.0, 16.0, 13.0, 13.0, 12.0, 13.0, 13.0, 15.0, 13.0, 14.0, 11.0, 16.0, 15.0, 15.0, 15.0, 11.0, 11.0, 12.0, 16.0, 16.0, 17.0, 15.0, 14.0, 15.0, 13.0, 14.0, 12.0, 11.0, 12.0, 15.0, 3.0, 3.0, 4.0, 7.0, 7.0, 8.0, 13.0, 10.0, 5.0, 11.0, 5.0, null, null, null, null, 9.0, 2.0, 7.0, 6.0, 8.0, 9.0, 5.0, 11.0, 11.0, 9.0, 8.0, 2.0, 3.0, 7.0, 9.0, 6.0, 10.0, 13.0, 6.0, 3.0, 8.0, 6.0, 4.0, 1.0, 2.0, 3.0, 5.0, 6.0, 5.0], "12": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 35.0, 34.0, 34.0, 36.0, 36.0, 33.0, 35.0, 34.0, 35.0, 36.0, 34.0, 30.0, 31.0, 31.0, 32.0, 34.0, 35.0, 32.0, 35.0, 30.0, 31.0, 28.0, 33.0, 32.0, 30.0, 33.0, 34.0, 34.0, 27.0, 31.0, 21.0, 21.0, 22.0, 31.0, 28.0, 33.0, 32.0, 30.0, 33.0, 27.0, 27.0, null, 31.0, 28.0, 29.0, 32.0, 34.0, 28.0, 31.0, 29.0, 32.0, 31.0, 29.0, 26.0, 21.0, 28.0, 24.0, 28.0, 22.0, 19.0, 16.0, null, 16.0, 17.0, 18.0, 22.0, 17.0, 17.0, 20.0, 22.0, 18.0, 17.0, 19.0, 21.0, 18.0, 15.0, 17.0, 18.0, 16.0, 18.0, 16.0, 19.0, 17.0, 16.0, 17.0, 17.0, 21.0, 21.0, 10.0, 7.0, 10.0, 12.0, 15.0, 17.0, 17.0, 17.0, 13.0, 15.0, 13.0, 14.0, null, null, null, 14.0, 8.0, 9.0, 10.0, 15.0, 17.0, 14.0, 15.0, 17.0, 17.0, 13.0, 7.0, 7.0, 10.0, 15.0, 12.0, 13.0, 18.0, 19.0, 7.0, 8.0, 13.0, 7.0, 7.0, 6.0, 8.0, 12.0, 14.0, 10.0, 9.0], "20": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 29.0, 30.0, 31.0, 30.0, 30.0, 26.0, 26.0, 24.0, 28.0, 30.0, 30.0, 29.0, 30.0, 25.0, 25.0, 25.0, 26.0, 27.0, 25.0, 29.0, 29.0, 30.0, 22.0, null, null, null, null, 25.0, null, 27.0, null, 29.0, 29.0, 28.0, 25.0, null, null, 29.0, 25.0, 27.0, 28.0, 32.0, 26.0, 26.0, 24.0, 25.0, 29.0, 27.0, 22.0, 21.0, 26.0, 24.0, 25.0, 18.0, 17.0, 15.0, 14.0, 15.0, 15.0, 16.0, 17.0, 15.0, 15.0, 14.0, 17.0, 15.0, 16.0, 17.0, 17.0, 12.0, 14.0, 17.0, 17.0, 17.0, 16.0, 15.0, null, 14.0, 15.0, 15.0, 15.0, 14.0, 18.0, 7.0, 6.0, 7.0, 10.0, 13.0, 9.0, 15.0, 14.0, 9.0, 9.0, 8.0, null, null, null, null, 12.0, 5.0, 9.0, 6.0, 11.0, 14.0, 9.0, 10.0, 15.0, 13.0, 9.0, 4.0, 4.0, 6.0, 12.0, 8.0, 9.0, 14.0, 11.0, 5.0, 9.0, 9.0, 6.0, 4.0, 3.0, 6.0, 7.0, 13.0, 10.0, null]}, "2026": {"6": [3.0, 0.0, null, 2.0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "12": [3.0, 3.0, 5.0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "20": [3.0, 1.0, 3.0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null]}};
    const humByYear = {"2025": {"6": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 73.0, null, null, null, null, null, 76.0, 71.0, 70.0, 73.0, 77.0, 84.0, 90.0, 97.0, 87.0, 91.0, 84.0, 84.0, 89.0, 95.0, 95.0, 87.0, 90.0, 90.0, 95.0, 94.0, 86.0, 73.0, 96.0, null, null, null, null, 90.0, null, 96.0, null, 92.0, 94.0, 83.0, 90.0, null, 73.0, 74.0, 86.0, 95.0, 93.0, 88.0, 88.0, 89.0, 92.0, 95.0, 92.0, 94.0, 89.0, 92.0, 97.0, 89.0, 90.0, 87.0, 82.0, 75.0, 83.0, 78.0, 83.0, 86.0, 72.0, 82.0, 66.0, 80.0, 75.0, 97.0, 87.0, 74.0, 77.0, 83.0, 85.0, 89.0, 98.0, 98.0, 91.0, 95.0, 73.0, 80.0, 84.0, 77.0, 91.0, 93.0, 91.0, 73.0, 56.0, 55.0, 59.0, 65.0, 66.0, 58.0, 31.0, 59.0, 35.0, 46.0, null, null, null, null, 79.0, 53.0, 45.0, 62.0, 71.0, 74.0, 67.0, 75.0, 78.0, 74.0, 73.0, 59.0, 70.0, 59.0, 53.0, 83.0, 73.0, 68.0, 90.0, 80.0, 77.0, 97.0, 93.0, 61.0, 68.0, 63.0, 71.0, 82.0, 76.0], "12": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 50.0, 51.0, 49.0, 42.0, 48.0, 57.0, 54.0, 49.0, 50.0, 48.0, 58.0, 70.0, 64.0, 67.0, 68.0, 55.0, 58.0, 67.0, 62.0, 74.0, 71.0, 76.0, 61.0, 69.0, 73.0, 70.0, 58.0, 52.0, 80.0, 68.0, 89.0, 82.0, 77.0, 69.0, 86.0, 68.0, 65.0, 72.0, 64.0, 77.0, 79.0, null, 65.0, 80.0, 73.0, 65.0, 55.0, 82.0, 65.0, 61.0, 56.0, 59.0, 71.0, 82.0, 86.0, 65.0, 84.0, 68.0, 90.0, 76.0, 74.0, null, 67.0, 60.0, 61.0, 51.0, 75.0, 61.0, 48.0, 53.0, 85.0, 98.0, 67.0, 49.0, 47.0, 69.0, 74.0, 85.0, 98.0, 95.0, 95.0, 59.0, 65.0, 73.0, 67.0, 64.0, 52.0, 58.0, 96.0, 40.0, 32.0, 30.0, 36.0, 42.0, 42.0, 49.0, 25.0, 34.0, 20.0, 29.0, null, null, null, 72.0, 63.0, 32.0, 41.0, 40.0, 43.0, 65.0, 49.0, 57.0, 49.0, 56.0, 93.0, 32.0, 40.0, 40.0, 54.0, 61.0, 46.0, 54.0, 82.0, 69.0, 64.0, 97.0, 53.0, 34.0, 48.0, 40.0, 42.0, 75.0, 57.0], "20": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 75.0, 71.0, 66.0, 71.0, 68.0, 78.0, 84.0, 97.0, 73.0, 68.0, 74.0, 74.0, 72.0, 92.0, 96.0, 88.0, 55.0, 87.0, 96.0, 68.0, 84.0, 71.0, 95.0, null, null, null, null, 81.0, null, 84.0, null, 71.0, 72.0, 80.0, 83.0, null, null, 76.0, 87.0, 82.0, 74.0, 59.0, 84.0, 79.0, 66.0, 81.0, 72.0, 79.0, 89.0, 88.0, 76.0, 87.0, 86.0, 96.0, 81.0, 69.0, 79.0, 65.0, 66.0, 65.0, 66.0, 80.0, 62.0, 69.0, 74.0, 96.0, 90.0, 59.0, 60.0, 64.0, 75.0, 78.0, 97.0, 98.0, 96.0, 97.0, null, 74.0, 78.0, 47.0, 65.0, 81.0, 68.0, 66.0, 35.0, 42.0, 38.0, 44.0, 50.0, 42.0, 54.0, 37.0, 60.0, 27.0, null, null, null, null, 65.0, 43.0, 36.0, 52.0, 57.0, 46.0, 73.0, 76.0, 63.0, 63.0, 71.0, 65.0, 42.0, 61.0, 46.0, 65.0, 80.0, 73.0, 76.0, 63.0, 78.0, 77.0, 97.0, 57.0, 57.0, 44.0, 66.0, 42.0, 72.0, null]}, "2026": {"6": [82.0, 69.0, null, 78.0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "12": [94.0, 48.0, 50.0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "20": [86.0, 57.0, 61.0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null]}};
    const weatherByYear = {"2025": {"6": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "晴", "", "", "", "", "", "晴", "晴", "晴", "多云", "多云", "阴", "雾", "雾", "雾", "雾", "晴", "多云", "雾", "雾", "雾", "多云", "雾", "晴", "阴", "晴", "晴", "多云", "雾", "", "", "", "", "雾", "", "雾", "", "雾", "雾", "多云", "雾", "", "多云", "阴", "雾", "雾", "雾", "雾", "多云", "晴", "雾", "雾", "雾", "雾", "雾", "雾", "雾", "多云", "小雨", "多云", "多云", "阴", "多云", "多云", "多云", "晴", "阴", "雾", "阴", "晴", "小雨", "阵雨", "雾", "雾", "多云", "阴", "阴", "小雨", "小雨", "雾", "雾", "雾", "阴", "阴", "雾", "雾", "雾", "雾", "雾", "多云", "多云", "晴", "晴", "晴", "霾", "阴", "霾", "晴", "晴", "霾", "", "", "", "", "阴", "晴", "阴", "晴", "雾", "雾", "晴", "阴", "晴", "阴", "阴", "晴", "晴", "阴", "多云", "霾", "雾", "晴", "小雨", "晴", "阴", "小雨", "雾", "晴", "晴", "阴", "雾", "雾", "阴"], "12": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "晴", "晴", "晴", "晴", "晴", "阴", "晴", "晴", "晴", "晴", "多云", "阴", "多云", "多云", "多云", "晴", "晴", "晴", "晴", "阴", "阴", "阴", "晴", "晴", "多云", "晴", "晴", "晴", "阴", "晴", "多云", "阴", "多云", "阴", "阴", "多云", "晴", "雾", "晴", "雾", "雾", "", "多云", "雾", "雾", "晴", "晴", "雾", "晴", "晴", "晴", "晴", "雾", "雾", "雾", "晴", "雾", "多云", "小雨", "阴", "阴", "", "阴", "阴", "阴", "多云", "雾", "阴", "多云", "晴", "小雨", "雾", "霾", "晴", "阴", "阴", "雾", "小雨", "小雨", "雾", "小雨", "多云", "阴", "阴", "晴", "霾", "晴", "晴", "阵雨", "晴", "晴", "晴", "晴", "晴", "晴", "阴", "晴", "晴", "霾", "霾", "", "", "", "阴", "阴", "阴", "阴", "晴", "晴", "霾", "晴", "阴", "晴", "阴", "小雨", "晴", "晴", "阴", "霾", "霾", "霾", "多云", "阴", "阴", "阴", "小雨", "晴", "晴", "阴", "多云", "多云", "霾", "阴"], "20": ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "晴", "晴", "晴", "晴", "阴", "阴", "大雨", "雾", "阴", "阴", "阴", "阴", "晴", "阴", "雾", "阴", "阴", "阴", "小雨", "阴", "晴", "阴", "小雨", "", "", "", "", "多云", "", "阴", "", "晴", "晴", "雾", "雾", "", "", "阴", "雾", "雾", "晴", "晴", "雾", "晴", "晴", "晴", "霾", "霾", "雾", "雾", "雾", "雾", "晴", "小雨", "阴", "阴", "阴", "多云", "晴", "晴", "阴", "阴", "阴", "晴", "阴", "小雨", "雾", "阴", "霾", "阴", "阴", "雾", "小雨", "雾", "小雨", "雾", "", "阴", "阴", "晴", "霾", "晴", "晴", "阴", "阴", "晴", "晴", "晴", "霾", "多云", "阴", "晴", "霾", "浮尘", "", "", "", "", "阴", "晴", "阴", "晴", "晴", "晴", "晴", "多云", "阴", "霾", "阴", "多云", "晴", "晴", "晴", "霾", "雾", "雾", "霾", "多云", "雾", "阴", "小雨", "晴", "多云", "晴", "晴", "阴", "雾", ""]}, "2026": {"6": ["雨夹雪", "晴", "", "雾", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], "12": ["雾", "多云", "晴", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], "20": ["雾", "晴", "霾", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]}};
    const hours = ['6', '12', '20'];
    const hourLabels = { '6': '06:00', '12': '12:00', '20': '20:00' };

    const ctx = document.getElementById('weatherChart');
    const baseColors = {
      '6': getComputedStyle(document.documentElement).getPropertyValue('--line-6').trim(),
      '12': getComputedStyle(document.documentElement).getPropertyValue('--line-12').trim(),
      '20': getComputedStyle(document.documentElement).getPropertyValue('--line-20').trim(),
    };
    const dashStyles = [[0, 0], [8, 5], [2, 3], [12, 6, 2, 6]];

    const modeData = {
      temperature: {
        source: tempByYear,
        yTitle: '温度 (°C)',
        suffix: '°C',
      },
      humidity: {
        source: humByYear,
        yTitle: '湿度 (%)',
        suffix: '%',
      }
    };

    const buildDatasets = (mode, selectedYears) => {
      const datasets = [];
      selectedYears.forEach((year, yearIndex) => {
        hours.forEach((hour) => {
          const color = baseColors[hour];
          datasets.push({
            label: `${hourLabels[hour]} · ${year}`,
            data: modeData[mode].source?.[year]?.[hour] ?? [],
            borderColor: color,
            backgroundColor: color,
            tension: 0.35,
            pointRadius: 2,
            pointHoverRadius: 5,
            pointHitRadius: 12,
            spanGaps: false,
            fill: false,
            borderWidth: 2,
            borderDash: dashStyles[yearIndex % dashStyles.length],
            _year: year,
            _hour: hour,
          });
        });
      });
      return datasets;
    };

    const updateTabs = (mode) => {
      document.querySelectorAll('.toolbar .tab').forEach((tab) => {
        tab.classList.toggle('is-active', tab.dataset.mode === mode);
      });
    };

    const updateRangeTabs = (range) => {
      document.querySelectorAll('.range-filter .tab').forEach((tab) => {
        tab.classList.toggle('is-active', tab.dataset.range === range);
      });
    };

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: buildDatasets('temperature', defaultYears)
      },
      options: {
        maintainAspectRatio: false,
        interaction: {
          mode: 'nearest',
          intersect: true,
        },
        scales: {
          y: {
            title: {
              display: true,
              text: '温度 (°C)'
            },
            grid: {
              color: 'rgba(120, 130, 140, 0.18)'
            },
            ticks: {
              callback: (value) => value
            }
          },
          x: {
            grid: {
              display: false
            }
          }
        },
        plugins: {
          legend: {
            position: 'top',
            labels: {
              usePointStyle: true,
              pointStyle: 'circle'
            }
          },
          tooltip: {
            callbacks: {
              title: (items) => {
                if (!items.length) return '';
                const year = items[0].dataset._year || '';
                return year ? `${year}-${items[0].label}` : items[0].label;
              },
              label: (context) => {
                const suffix = modeData[chart.$mode].suffix;
                const value = context.parsed.y ?? '无数据';
                return ` ${context.dataset.label}: ${value}${suffix}`;
              },
              afterLabel: (context) => {
                const idx = chart.$indexMap?.[context.dataIndex] ?? context.dataIndex;
                const year = context.dataset._year;
                const hour = context.dataset._hour;
                const humidity = humByYear?.[year]?.[hour]?.[idx];
                const humText = humidity === null || humidity === undefined ? '无数据' : `${humidity}%`;
                const weather = weatherByYear?.[year]?.[hour]?.[idx] || '未知';
                return ` 湿度: ${humText}  天气: ${weather}`;
              }
            }
          }
        },
        animation: {
          duration: 1200,
          easing: 'easeOutQuart'
        }
      }
    });

    chart.$mode = 'temperature';
    chart.$range = 'last-3-months';
    const selectedYears = new Set(defaultYears);

    const dayOfYear = (year, month, day) => {
      const date = new Date(year, month - 1, day);
      const start = new Date(year, 0, 1);
      return Math.floor((date - start) / 86400000) + 1;
    };

    const labelDayOfYear = labels.map((label, idx) => dayOfYear(baseYear, labelMonths[idx], labelDays[idx]));

    const rangeIndices = (range) => {
      if (range === 'full') {
        return labels.map((_, idx) => idx);
      }
      if (range === 'first-half') {
        return labelMonths.map((m, idx) => m <= 6 ? idx : null).filter((v) => v !== null);
      }
      if (range === 'second-half') {
        return labelMonths.map((m, idx) => m >= 7 ? idx : null).filter((v) => v !== null);
      }
      if (range === 'last-3-months') {
        const today = new Date();
        const start = new Date(today);
        start.setMonth(start.getMonth() - 3);

        const endDoy = dayOfYear(baseYear, today.getMonth() + 1, today.getDate());
        const startDoy = dayOfYear(baseYear, start.getMonth() + 1, start.getDate());

        if (startDoy <= endDoy) {
          return labelDayOfYear.map((doy, idx) => (doy >= startDoy && doy <= endDoy) ? idx : null).filter((v) => v !== null);
        }
        const tail = [];
        const head = [];
        labelDayOfYear.forEach((doy, idx) => {
          if (doy >= startDoy) {
            tail.push(idx);
          } else if (doy <= endDoy) {
            head.push(idx);
          }
        });
        return tail.concat(head);
      }
      return labels.map((_, idx) => idx);
    };

    const applyRange = (range) => {
      const idxs = rangeIndices(range);
      chart.$indexMap = idxs;
      chart.data.labels = idxs.map((idx) => labels[idx]);
      chart.data.datasets.forEach((dataset) => {
        if (!dataset._fullData) {
          dataset._fullData = dataset.data;
        }
        dataset.data = idxs.map((idx) => dataset._fullData[idx]);
      });
      chart.update();
      updateRangeTabs(range);
    };

    const setMode = (mode) => {
      chart.$mode = mode;
      const yearsList = Array.from(selectedYears);
      chart.data.datasets = buildDatasets(mode, yearsList);
      chart.data.datasets.forEach((dataset) => {
        dataset._fullData = dataset.data;
      });
      chart.options.scales.y.title.text = modeData[mode].yTitle;
      chart.options.scales.y.ticks.callback = (value) => mode === 'humidity' ? `${value}%` : value;
      chart.update();
      updateTabs(mode);
      applyRange(chart.$range);
    };

    document.querySelectorAll('.toolbar .tab').forEach((tab) => {
      tab.addEventListener('click', () => setMode(tab.dataset.mode));
    });

    updateTabs('temperature');
    updateRangeTabs('last-3-months');

    document.querySelectorAll('.year-chip input').forEach((input) => {
      input.addEventListener('change', () => {
        if (input.checked) {
          selectedYears.add(input.value);
        } else {
          selectedYears.delete(input.value);
        }
        const yearsList = Array.from(selectedYears);
        chart.data.datasets = buildDatasets(chart.$mode, yearsList);
        chart.data.datasets.forEach((dataset) => {
          dataset._fullData = dataset.data;
        });
        applyRange(chart.$range);
      });
    });

    document.querySelectorAll('.range-filter .tab').forEach((tab) => {
      tab.addEventListener('click', () => {
        chart.$range = tab.dataset.range;
        applyRange(chart.$range);
      });
    });

    applyRange('last-3-months');
  </script>
</body>
</html>