## 2025-12-31 现状 
1. 已有 weather_to_calendar.sh 可实现获取温度信息并写入 apple 的 calendar
2. 脚本会被自动化运行, 在每天的 6:00,12:00,20:00 从而自动获取这 3 个时间点的实时温度
3. 我的calendar 上已经有从 2025 年 8 月 21 日起至今每天那 3 个时间点的实时温度

## 2025-12-31 新需求
1. 增强 weather_to_calendar.sh 的功能,不仅写入calendar,还要写入本地文件
    - 目录: weather_history
    - 格式: 每次请求的完整结果存一个 json 文件在本地, 命名使用有意义的(比如日期时间)而不是纯自增序号
2. 增加一个 html_generator.py 文件, 可以生成 chart.html 文件
    - 效果: 把 weather_history 目录下的数据做成精美的折线图, 一共 3 条线分别是那三个时间点在每天的温度
    - 时机: 每当 weather_to_calendar.sh 被执行时, 都调用 html_generator.py 生成 chart.html
3. calendar 上的历史数据提取
    - 用一个临时的export_calendar_history.sh脚本提取2025 年 8 月 21 日起至今的数据到 weather_history 目录

## 2025-12-31 vibe coding 历史
weather_history 里保存的 JSON：要原始高德 API 返回，还是清洗后的结构（比如 time/temperature/weather/humidity/raw）？答: 原始高德 API 返回
文件命名：可以用 YYYYMMDD_HHMMSS.json 或 YYYY-MM-DD_HHMM.json 吗？时间用脚本执行时间还是事件开始时间？答:YYYY-MM-DD_HHMM.json, 脚本执行时间
折线图的三条线：固定对应6:00/12:00/20:00，还是按事件开始小时自动分组？答: 第一条线是每天 6 点的温度, 第二条线是每天 12 点的温度, 第三条线是每天 20 点的温度, 三条线不同颜色
chart.html：可以用CDN 图表库（比如 Chart.js），还是必须离线纯 HTML+JS？答: 可以用CDN 图表库, 要精美
历史提取脚本：是从日历事件标题里解析温度/天气/湿度来还原 JSON，对吗？答: 日历事件标题是比如"10°C，霾，75%", 还原 json
历史提取的日历名称：默认就是 杭州天气存档 吗？答: 是的

提问: 如果weather_history中包含了 6 点,12 点,20 点以外的时间点的数据, 程序会直接忽略吗?

现在项目成功了. 新增以下特性:
在 hover 的黑色背景小窗里增加湿度(比如 "89%")和天气(比如"霾")
在图表顶部工具栏增加温度/湿度切换显示的 tab, 使得切换到湿度时, 图表展示的是湿度(纵轴是百分比刻度), tab 的默认选中温度

新建一个配置文件把我选中的配置参数放进去
新建一个 gitignore,把配置文件忽略, 再新建一个 配置文件的模版示例

我不希望图标的横轴无限延长, 而是始终最多显示一年的 1 月 1 日到 12 月 31 日,
如果weather_history包含多年的数据, 则顶部出现年份多选, 默认只选中最新的年

再增加一个一年内的时间范围选择器,以下几个选项:全年(默认),上半年,下半年,最近 3 个月